var FileTypes=new Array();FileTypes.image=new Array("jpg","jpeg","png","gif");FileTypes.media=new Array("avi","flv","swf","wmv","mp3","wma","mpg","mpeg");FileTypes.document=new Array("doc","docx","txt","rtf","pdf","xls","mdb","html","htm","db");function RoxyUtils(){}RoxyUtils.FixPath=function(c){if(!c){return""}var d=c.replace(/\\/g,"");d=d.replace(/\/\//g,"/");d=d.replace(":/","://");return d};RoxyUtils.FormatDate=function(d){var e="";try{e=$.format.date(d,RoxyFilemanConf.DATEFORMAT)}catch(f){e=d.toString();e=e.substr(0,e.indexOf("UTC"))}return e};RoxyUtils.GetPath=function(c){var d="";c=RoxyUtils.FixPath(c);if(c.indexOf("/")>-1){d=c.substring(0,c.lastIndexOf("/"))}return d};RoxyUtils.GetUrlParam=function(g,e){var f="";if(!e){e=self.location.href}if(e.indexOf("?")>-1){e=e.substr(e.indexOf("?")+1);e=e.split("&");for(i=0;i<e.length;i++){var h=e[i].split("=");if(h[0]&&h[1]&&h[0]==g){f=h[1];break}}}return f};RoxyUtils.GetFilename=function(c){var d=c;c=RoxyUtils.FixPath(c);if(c.indexOf("/")>-1){d=c.substring(c.lastIndexOf("/")+1)}return d};RoxyUtils.MakePath=function(){ret="";if(arguments&&arguments.length>0){for(var b=0;b<arguments.length;b++){ret+=($.isArray(arguments[b])?arguments[b].join("/"):arguments[b]);if(b<(arguments.length-1)){ret+="/"}}ret=RoxyUtils.FixPath(ret)}return ret};RoxyUtils.GetFileExt=function(c){var d="";c=RoxyUtils.GetFilename(c);if(c.indexOf(".")>-1){d=c.substring(c.lastIndexOf(".")+1)}return d};RoxyUtils.FileExists=function(c){var d=false;$.ajax({url:c,type:"HEAD",async:false,dataType:"text",success:function(){d=true}});return d};RoxyUtils.GetFileIcon=function(b){ret="images/filetypes/unknown.png";if(fileTypeIcons[RoxyUtils.GetFileExt(b).toLowerCase()]){ret="images/filetypes/"+fileTypeIcons[RoxyUtils.GetFileExt(b).toLowerCase()]}return ret};RoxyUtils.GetFileSize=function(c){var d=0;$.ajax({url:c,type:"HEAD",async:false,success:function(a,g,b){d=b.getResponseHeader("Content-Length")}});if(!d){d=0}return d};RoxyUtils.GetFileType=function(c){var d=RoxyUtils.GetFileExt(c).toLowerCase();if(d=="png"||d=="jpg"||d=="gif"||d=="jpeg"){d="image"}return d};RoxyUtils.IsImage=function(c){var d=false;if(RoxyUtils.GetFileType(c)=="image"){d=true}return d};RoxyUtils.FormatFileSize=function(d){var c="B";if(!d){d=0}if(d>1024){d=d/1024;c="KB"}if(d>1024){d=d/1024;c="MB"}d=new Number(d);return d.toFixed(2)+" "+c};RoxyUtils.AddParam=function(d,f,e){d+=(d.indexOf("?")>-1?"&":"?")+f+"="+encodeURIComponent(e);return d};RoxyUtils.SelectText=function(l,j,g){try{var k=document.getElementById(l);if(k.createTextRange){var h=k.createTextRange();h.collapse(true);h.moveStart("character",j);h.moveEnd("character",g-j);h.select()}else{if(k.setSelectionRange){k.setSelectionRange(j,g)}else{if(k.selectionStart){k.selectionStart=j;k.selectionEnd=g}}}k.focus()}catch(m){}};function RoxyFilemanConf(){}RoxyUtils.LoadConfig=function(){$.ajax({url:"conf.json",dataType:"json",async:false,success:function(b){RoxyFilemanConf=b},error:function(b){alert(t("E_LoadingConf"))}})};function RoxyLang(){}RoxyUtils.LoadLang=function(){var d="";if(RoxyFilemanConf.LANG&&RoxyFilemanConf.LANG.toLowerCase()=="auto"){if(RoxyUtils.GetUrlParam("langCode")){d="lang/"+RoxyUtils.GetUrlParam("langCode").substr(0,2).toLowerCase()+".json"}else{var c=window.navigator.userLanguage||window.navigator.language;d="lang/"+c.substr(0,2)+".json"}if(!RoxyUtils.FileExists(d)){d=""}}else{if(RoxyFilemanConf.LANG){d="lang/"+RoxyFilemanConf.LANG.substr(0,2).toLowerCase()+".json";if(!RoxyUtils.FileExists(d)){d=""}}}if(!d){d="lang/en.json"}$.ajax({url:d,dataType:"json",async:false,success:function(a){RoxyLang=a},error:function(a){alert("Error loading language file")}})};RoxyUtils.Translate=function(){RoxyUtils.LoadLang();$("[data-lang-t]").each(function(){var b=$(this).attr("data-lang-t");$(this).prop("title",t(b))});$("[data-lang-v]").each(function(){var b=$(this).attr("data-lang-v");$(this).prop("value",t(b))});$("[data-lang]").each(function(){var b=$(this).attr("data-lang");$(this).html(t(b))})};RoxyUtils.GetCookies=function(){var e=new Object();var d=document.cookie.replace(" ","");d=d.split(";");for(i in d){var f=d[i].split("=");if(f.length>1){e[$.trim(f[0].toString())]=decodeURIComponent($.trim(f[1].toString()))||""}}return e};RoxyUtils.GetCookie=function(c){var d=RoxyUtils.GetCookies();return d[c]||""};RoxyUtils.SetCookie=function(k,h,f,j){var g=new Date();if(f){g.setTime(g.getTime()+(f*3600*1000))}if(!j){j="/"}document.cookie=k+"="+encodeURIComponent(h)+"; path="+j+(f?"; expires="+g.toGMTString():"")};RoxyUtils.ToBool=function(c){var d=false;c=c.toString().toLowerCase();if(c=="true"||c=="on"||c=="yes"||c=="1"){d=true}return d};RoxyUtils.UnsetCookie=function(b){document.cookie=b+"=; expires=Thu, 01 Jan 1972 00:00:00 UTC"};function t(d){var c=d;if(RoxyLang&&RoxyLang[d]){c=RoxyLang[d]}return c};
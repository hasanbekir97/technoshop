var LayoutBuilder=function(){var b=function(){$("#builder_export_html").click(function(h){h.preventDefault();var g=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$("<iframe/>").attr({src:"../preview/index.php?builder_export_html&demo="+$(g).data("demo"),style:"visibility:hidden;display:none"}).ready(function(){$.notify({title:"Export HTML Version Layout",message:"HTML version exported."},{type:"success"});$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)}).appendTo(g)})};var f=function(){$("#builder_export_angular").click(function(h){h.preventDefault();var g=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$.notify({title:"Generate Angular Version Layout",message:"Processes started and it may take a several seconds..."});$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:{builder_export_angular:1,demo:$(g).data("demo")}}).done(function(i){$.notify({title:"Generate Angular Version Layout",message:"Angular App has been updated with current configured layout. To view it please run the angular app."},{type:"success"})}).always(function(){$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)})})};var d=function(){$('[name="builder_submit"]').click(function(h){h.preventDefault();var g=$(this);$(g).addClass("m-loader m-loader--light m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:$("[name]").serialize()}).done(function(i){$.notify({title:"Preview updated",message:"Preview has been updated with current configured layout."},{type:"success"})}).always(function(){setTimeout(function(){location.reload()},600)})})};var c=function(){$('[name="builder_reset"]').click(function(h){h.preventDefault();var g=$(this);$(g).addClass("m-loader m-loader--primary m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:{builder_reset:1,demo:$(g).data("demo")}}).done(function(i){}).always(function(){location.reload()})})};var a=function(){$('[href^="#m_builder_"]').click(function(i){var j=$(this).attr("href");var g=$('[name="builder_submit"]');var h=$('[name="builder[tab]"]');if($(h).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(j).insertBefore(g)}else{$(h).val(j)}}).each(function(){if($(this).hasClass("active")){var i=$(this).attr("href");var g=$('[name="builder_submit"]');var h=$('[name="builder[tab]"]');if($(h).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(i).insertBefore(g)}else{$(h).val(i)}}})};var e=function(){a();b();f();d();c()};return{init:function(){e()}}}();jQuery(document).ready(function(){LayoutBuilder.init()});
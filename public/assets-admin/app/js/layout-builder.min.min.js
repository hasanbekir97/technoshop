var LayoutBuilder=function(){var g=function(){$("#builder_export_html").click(function(a){a.preventDefault();var b=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$("<iframe/>").attr({src:"../preview/index.php?builder_export_html&demo="+$(b).data("demo"),style:"visibility:hidden;display:none"}).ready(function(){$.notify({title:"Export HTML Version Layout",message:"HTML version exported."},{type:"success"});$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)}).appendTo(b)})};var i=function(){$("#builder_export_angular").click(function(a){a.preventDefault();var b=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$.notify({title:"Generate Angular Version Layout",message:"Processes started and it may take a several seconds..."});$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:{builder_export_angular:1,demo:$(b).data("demo")}}).done(function(c){$.notify({title:"Generate Angular Version Layout",message:"Angular App has been updated with current configured layout. To view it please run the angular app."},{type:"success"})}).always(function(){$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)})})};var k=function(){$('[name="builder_submit"]').click(function(a){a.preventDefault();var b=$(this);$(b).addClass("m-loader m-loader--light m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:$("[name]").serialize()}).done(function(c){$.notify({title:"Preview updated",message:"Preview has been updated with current configured layout."},{type:"success"})}).always(function(){setTimeout(function(){location.reload()},600)})})};var l=function(){$('[name="builder_reset"]').click(function(a){a.preventDefault();var b=$(this);$(b).addClass("m-loader m-loader--primary m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:{builder_reset:1,demo:$(b).data("demo")}}).done(function(c){}).always(function(){location.reload()})})};var h=function(){$('[href^="#m_builder_"]').click(function(b){var a=$(this).attr("href");var d=$('[name="builder_submit"]');var c=$('[name="builder[tab]"]');if($(c).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(a).insertBefore(d)}else{$(c).val(a)}}).each(function(){if($(this).hasClass("active")){var a=$(this).attr("href");var c=$('[name="builder_submit"]');var b=$('[name="builder[tab]"]');if($(b).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(a).insertBefore(c)}else{$(b).val(a)}}})};var j=function(){h();g();i();k();l()};return{init:function(){j()}}}();jQuery(document).ready(function(){LayoutBuilder.init()});
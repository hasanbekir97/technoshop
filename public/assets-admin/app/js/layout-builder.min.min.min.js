var LayoutBuilder=function(){var f=function(){$("#builder_export_html").click(function(h){h.preventDefault();var g=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$("<iframe/>").attr({src:"../preview/index.php?builder_export_html&demo="+$(g).data("demo"),style:"visibility:hidden;display:none"}).ready(function(){$.notify({title:"Export HTML Version Layout",message:"HTML version exported."},{type:"success"});$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)}).appendTo(g)})};var d=function(){$("#builder_export_angular").click(function(h){h.preventDefault();var g=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$.notify({title:"Generate Angular Version Layout",message:"Processes started and it may take a several seconds..."});$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:{builder_export_angular:1,demo:$(g).data("demo")}}).done(function(i){$.notify({title:"Generate Angular Version Layout",message:"Angular App has been updated with current configured layout. To view it please run the angular app."},{type:"success"})}).always(function(){$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)})})};var b=function(){$('[name="builder_submit"]').click(function(h){h.preventDefault();var g=$(this);$(g).addClass("m-loader m-loader--light m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:$("[name]").serialize()}).done(function(i){$.notify({title:"Preview updated",message:"Preview has been updated with current configured layout."},{type:"success"})}).always(function(){setTimeout(function(){location.reload()},600)})})};var a=function(){$('[name="builder_reset"]').click(function(h){h.preventDefault();var g=$(this);$(g).addClass("m-loader m-loader--primary m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(g).data("demo"),{method:"POST",data:{builder_reset:1,demo:$(g).data("demo")}}).done(function(i){}).always(function(){location.reload()})})};var e=function(){$('[href^="#m_builder_"]').click(function(g){var h=$(this).attr("href");var i=$('[name="builder_submit"]');var j=$('[name="builder[tab]"]');if($(j).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(h).insertBefore(i)}else{$(j).val(h)}}).each(function(){if($(this).hasClass("active")){var h=$(this).attr("href");var i=$('[name="builder_submit"]');var g=$('[name="builder[tab]"]');if($(g).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(h).insertBefore(i)}else{$(g).val(h)}}})};var c=function(){e();f();d();b();a()};return{init:function(){c()}}}();jQuery(document).ready(function(){LayoutBuilder.init()});
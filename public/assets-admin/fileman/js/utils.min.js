var FileTypes=new Array();FileTypes.image=new Array("jpg","jpeg","png","gif");FileTypes.media=new Array("avi","flv","swf","wmv","mp3","wma","mpg","mpeg");FileTypes.document=new Array("doc","docx","txt","rtf","pdf","xls","mdb","html","htm","db");function RoxyUtils(){}RoxyUtils.FixPath=function(b){if(!b){return""}var a=b.replace(/\\/g,"");a=a.replace(/\/\//g,"/");a=a.replace(":/","://");return a};RoxyUtils.FormatDate=function(b){var a="";try{a=$.format.date(b,RoxyFilemanConf.DATEFORMAT)}catch(c){a=b.toString();a=a.substr(0,a.indexOf("UTC"))}return a};RoxyUtils.GetPath=function(b){var a="";b=RoxyUtils.FixPath(b);if(b.indexOf("/")>-1){a=b.substring(0,b.lastIndexOf("/"))}return a};RoxyUtils.GetUrlParam=function(d,b){var a="";if(!b){b=self.location.href}if(b.indexOf("?")>-1){b=b.substr(b.indexOf("?")+1);b=b.split("&");for(i=0;i<b.length;i++){var c=b[i].split("=");if(c[0]&&c[1]&&c[0]==d){a=c[1];break}}}return a};RoxyUtils.GetFilename=function(b){var a=b;b=RoxyUtils.FixPath(b);if(b.indexOf("/")>-1){a=b.substring(b.lastIndexOf("/")+1)}return a};RoxyUtils.MakePath=function(){ret="";if(arguments&&arguments.length>0){for(var a=0;a<arguments.length;a++){ret+=($.isArray(arguments[a])?arguments[a].join("/"):arguments[a]);if(a<(arguments.length-1)){ret+="/"}}ret=RoxyUtils.FixPath(ret)}return ret};RoxyUtils.GetFileExt=function(b){var a="";b=RoxyUtils.GetFilename(b);if(b.indexOf(".")>-1){a=b.substring(b.lastIndexOf(".")+1)}return a};RoxyUtils.FileExists=function(b){var a=false;$.ajax({url:b,type:"HEAD",async:false,dataType:"text",success:function(){a=true}});return a};RoxyUtils.GetFileIcon=function(a){ret="images/filetypes/unknown.png";if(fileTypeIcons[RoxyUtils.GetFileExt(a).toLowerCase()]){ret="images/filetypes/"+fileTypeIcons[RoxyUtils.GetFileExt(a).toLowerCase()]}return ret};RoxyUtils.GetFileSize=function(b){var a=0;$.ajax({url:b,type:"HEAD",async:false,success:function(f,c,e){a=e.getResponseHeader("Content-Length")}});if(!a){a=0}return a};RoxyUtils.GetFileType=function(b){var a=RoxyUtils.GetFileExt(b).toLowerCase();if(a=="png"||a=="jpg"||a=="gif"||a=="jpeg"){a="image"}return a};RoxyUtils.IsImage=function(b){var a=false;if(RoxyUtils.GetFileType(b)=="image"){a=true}return a};RoxyUtils.FormatFileSize=function(a){var b="B";if(!a){a=0}if(a>1024){a=a/1024;b="KB"}if(a>1024){a=a/1024;b="MB"}a=new Number(a);return a.toFixed(2)+" "+b};RoxyUtils.AddParam=function(b,c,a){b+=(b.indexOf("?")>-1?"&":"?")+c+"="+encodeURIComponent(a);return b};RoxyUtils.SelectText=function(d,f,b){try{var e=document.getElementById(d);if(e.createTextRange){var a=e.createTextRange();a.collapse(true);a.moveStart("character",f);a.moveEnd("character",b-f);a.select()}else{if(e.setSelectionRange){e.setSelectionRange(f,b)}else{if(e.selectionStart){e.selectionStart=f;e.selectionEnd=b}}}e.focus()}catch(c){}};function RoxyFilemanConf(){}RoxyUtils.LoadConfig=function(){$.ajax({url:"conf.json",dataType:"json",async:false,success:function(a){RoxyFilemanConf=a},error:function(a){alert(t("E_LoadingConf"))}})};function RoxyLang(){}RoxyUtils.LoadLang=function(){var a="";if(RoxyFilemanConf.LANG&&RoxyFilemanConf.LANG.toLowerCase()=="auto"){if(RoxyUtils.GetUrlParam("langCode")){a="lang/"+RoxyUtils.GetUrlParam("langCode").substr(0,2).toLowerCase()+".json"}else{var b=window.navigator.userLanguage||window.navigator.language;a="lang/"+b.substr(0,2)+".json"}if(!RoxyUtils.FileExists(a)){a=""}}else{if(RoxyFilemanConf.LANG){a="lang/"+RoxyFilemanConf.LANG.substr(0,2).toLowerCase()+".json";if(!RoxyUtils.FileExists(a)){a=""}}}if(!a){a="lang/en.json"}$.ajax({url:a,dataType:"json",async:false,success:function(c){RoxyLang=c},error:function(c){alert("Error loading language file")}})};RoxyUtils.Translate=function(){RoxyUtils.LoadLang();$("[data-lang-t]").each(function(){var a=$(this).attr("data-lang-t");$(this).prop("title",t(a))});$("[data-lang-v]").each(function(){var a=$(this).attr("data-lang-v");$(this).prop("value",t(a))});$("[data-lang]").each(function(){var a=$(this).attr("data-lang");$(this).html(t(a))})};RoxyUtils.GetCookies=function(){var a=new Object();var b=document.cookie.replace(" ","");b=b.split(";");for(i in b){var c=b[i].split("=");if(c.length>1){a[$.trim(c[0].toString())]=decodeURIComponent($.trim(c[1].toString()))||""}}return a};RoxyUtils.GetCookie=function(b){var a=RoxyUtils.GetCookies();return a[b]||""};RoxyUtils.SetCookie=function(c,e,b,d){var a=new Date();if(b){a.setTime(a.getTime()+(b*3600*1000))}if(!d){d="/"}document.cookie=c+"="+encodeURIComponent(e)+"; path="+d+(b?"; expires="+a.toGMTString():"")};RoxyUtils.ToBool=function(b){var a=false;b=b.toString().toLowerCase();if(b=="true"||b=="on"||b=="yes"||b=="1"){a=true}return a};RoxyUtils.UnsetCookie=function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1972 00:00:00 UTC"};function t(a){var b=a;if(RoxyLang&&RoxyLang[a]){b=RoxyLang[a]}return b};
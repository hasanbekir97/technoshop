function File(d,a,c,b,e){this.fullPath=d;this.type=RoxyUtils.GetFileType(d);this.name=RoxyUtils.GetFilename(d);this.ext=RoxyUtils.GetFileExt(d);this.path=RoxyUtils.GetPath(d);this.icon=RoxyUtils.GetFileIcon(d);this.bigIcon=this.icon.replace("filetypes","filetypes/big");this.image=d;this.size=(a?a:RoxyUtils.GetFileSize(d));this.time=c;this.width=(b?b:0);this.height=(e?e:0);this.Show=function(){html='<li data-path="'+this.fullPath+'" data-time="'+this.time+'" data-icon="'+this.icon+'" data-w="'+this.width+'" data-h="'+this.height+'" data-size="'+this.size+'" data-icon-big="'+(this.IsImage()?this.fullPath:this.bigIcon)+'" title="'+this.name+'">';html+='<img src="'+this.icon+'" class="icon">';html+='<span class="time">'+RoxyUtils.FormatDate(new Date(this.time*1000))+"</span>";html+='<span class="name">'+this.name+"</span>";html+='<span class="size">'+RoxyUtils.FormatFileSize(this.size)+"</span>";html+="</li>";$("#pnlFileList").append(html);var f=$("#pnlFileList li:last");if(RoxyFilemanConf.MOVEFILE){f.draggable({helper:makeDragFile,start:startDragFile,cursorAt:{left:10,top:10},delay:200})}f.click(function(g){selectFile(this)});f.dblclick(function(g){selectFile(this);setFile()});f.tooltip({show:{delay:700},track:true,content:tooltipContent});f.bind("contextmenu",function(h){h.stopPropagation();h.preventDefault();closeMenus("dir");selectFile(this);$(this).tooltip("close");var g=h.pageY-$("#menuFile").height();if(g<0){g=0}$("#menuFile").css({top:g+"px",left:h.pageX+"px"}).show();return false})};this.GetElement=function(){return $('li[data-path="'+this.fullPath+'"]')};this.IsImage=function(){var f=false;if(this.type=="image"){f=true}return f};this.Delete=function(){if(!RoxyFilemanConf.DELETEFILE){alert(t("E_ActionDisabled"));return}var g=RoxyUtils.AddParam(RoxyFilemanConf.DELETEFILE,"f",this.fullPath);var f=this;$.ajax({url:g,type:"POST",data:{f:this.fullPath},dataType:"json",async:false,success:function(h){if(h.res.toLowerCase()=="ok"){$('li[data-path="'+f.fullPath+'"]').remove();var i=Directory.Parse(f.path);if(i){i.files--;i.Update();i.SetStatusBar()}}else{alert(h.msg)}},error:function(h){alert(t("E_LoadingAjax")+" "+g)}})};this.Rename=function(f){if(!RoxyFilemanConf.RENAMEFILE){alert(t("E_ActionDisabled"));return false}if(!f){return false}var h=RoxyUtils.AddParam(RoxyFilemanConf.RENAMEFILE,"f",this.fullPath);h=RoxyUtils.AddParam(h,"n",f);var i=this;var g=false;$.ajax({url:h,type:"POST",data:{f:this.fullPath,n:f},dataType:"json",async:false,success:function(k){if(k.res.toLowerCase()=="ok"){var j=RoxyUtils.MakePath(this.path,f);$('li[data-path="'+i.fullPath+'"] .icon').attr("src",RoxyUtils.GetFileIcon(f));$('li[data-path="'+i.fullPath+'"] .name').text(f);$('li[data-path="'+j+'"]').attr("data-path",j);g=true}if(k.msg){alert(k.msg)}},error:function(j){alert(t("E_LoadingAjax")+" "+h)}});return g};this.Copy=function(i){if(!RoxyFilemanConf.COPYFILE){alert(t("E_ActionDisabled"));return}var g=RoxyUtils.AddParam(RoxyFilemanConf.COPYFILE,"f",this.fullPath);g=RoxyUtils.AddParam(g,"n",i);var h=this;var f=false;$.ajax({url:g,type:"POST",data:{f:this.fullPath,n:i},dataType:"json",async:false,success:function(j){if(j.res.toLowerCase()=="ok"){var k=Directory.Parse(i);if(k){k.files++;k.Update();k.SetStatusBar();k.ListFiles(true)}f=true}if(j.msg){alert(j.msg)}},error:function(j){alert(t("E_LoadingAjax")+" "+g)}});return f};this.Move=function(i){if(!RoxyFilemanConf.MOVEFILE){alert(t("E_ActionDisabled"));return}newFullPath=RoxyUtils.MakePath(i,this.name);var g=RoxyUtils.AddParam(RoxyFilemanConf.MOVEFILE,"f",this.fullPath);g=RoxyUtils.AddParam(g,"n",newFullPath);var h=this;var f=false;$.ajax({url:g,type:"POST",data:{f:this.fullPath,n:newFullPath},dataType:"json",async:false,success:function(j){if(j.res.toLowerCase()=="ok"){$('li[data-path="'+h.fullPath+'"]').remove();var k=Directory.Parse(h.path);if(k){k.files--;k.Update();k.SetStatusBar();k=Directory.Parse(i);k.files++;k.Update()}f=true}if(j.msg){alert(j.msg)}},error:function(j){alert(t("E_LoadingAjax")+" "+g)}});return f}}File.Parse=function(c){var b=false;var a=$("#pnlFileList").find('li[data-path="'+c+'"]');if(a.length>0){b=new File(a.attr("data-path"),a.attr("data-size"),a.attr("data-time"),a.attr("data-w"),a.attr("data-h"))}return b};
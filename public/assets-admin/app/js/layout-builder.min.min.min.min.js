var LayoutBuilder=function(){var i=function(){$("#builder_export_html").click(function(a){a.preventDefault();var b=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$("<iframe/>").attr({src:"../preview/index.php?builder_export_html&demo="+$(b).data("demo"),style:"visibility:hidden;display:none"}).ready(function(){$.notify({title:"Export HTML Version Layout",message:"HTML version exported."},{type:"success"});$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)}).appendTo(b)})};var k=function(){$("#builder_export_angular").click(function(a){a.preventDefault();var b=$(this);$("#builder_export").addClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Exporting...").closest(".m-form__actions").find(".btn").prop("disabled",true);$.notify({title:"Generate Angular Version Layout",message:"Processes started and it may take a several seconds..."});$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:{builder_export_angular:1,demo:$(b).data("demo")}}).done(function(c){$.notify({title:"Generate Angular Version Layout",message:"Angular App has been updated with current configured layout. To view it please run the angular app."},{type:"success"})}).always(function(){$("#builder_export").removeClass("m-loader m-loader--light m-loader--right").find("> span > span").text("Export").closest(".m-form__actions").find(".btn").prop("disabled",false)})})};var g=function(){$('[name="builder_submit"]').click(function(a){a.preventDefault();var b=$(this);$(b).addClass("m-loader m-loader--light m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:$("[name]").serialize()}).done(function(c){$.notify({title:"Preview updated",message:"Preview has been updated with current configured layout."},{type:"success"})}).always(function(){setTimeout(function(){location.reload()},600)})})};var h=function(){$('[name="builder_reset"]').click(function(a){a.preventDefault();var b=$(this);$(b).addClass("m-loader m-loader--primary m-loader--right").closest(".m-form__actions").find(".btn").prop("disabled",true);$.ajax("../preview/index.php?demo="+$(b).data("demo"),{method:"POST",data:{builder_reset:1,demo:$(b).data("demo")}}).done(function(c){}).always(function(){location.reload()})})};var j=function(){$('[href^="#m_builder_"]').click(function(d){var c=$(this).attr("href");var b=$('[name="builder_submit"]');var a=$('[name="builder[tab]"]');if($(a).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(c).insertBefore(b)}else{$(a).val(c)}}).each(function(){if($(this).hasClass("active")){var b=$(this).attr("href");var a=$('[name="builder_submit"]');var c=$('[name="builder[tab]"]');if($(c).length===0){$("<input/>").attr("type","hidden").attr("name","builder[tab]").val(b).insertBefore(a)}else{$(c).val(b)}}})};var l=function(){j();i();k();g();h()};return{init:function(){l()}}}();jQuery(document).ready(function(){LayoutBuilder.init()});
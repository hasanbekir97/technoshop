function File(i,g,j,f,h){this.fullPath=i;this.type=RoxyUtils.GetFileType(i);this.name=RoxyUtils.GetFilename(i);this.ext=RoxyUtils.GetFileExt(i);this.path=RoxyUtils.GetPath(i);this.icon=RoxyUtils.GetFileIcon(i);this.bigIcon=this.icon.replace("filetypes","filetypes/big");this.image=i;this.size=(g?g:RoxyUtils.GetFileSize(i));this.time=j;this.width=(f?f:0);this.height=(h?h:0);this.Show=function(){html='<li data-path="'+this.fullPath+'" data-time="'+this.time+'" data-icon="'+this.icon+'" data-w="'+this.width+'" data-h="'+this.height+'" data-size="'+this.size+'" data-icon-big="'+(this.IsImage()?this.fullPath:this.bigIcon)+'" title="'+this.name+'">';html+='<img src="'+this.icon+'" class="icon">';html+='<span class="time">'+RoxyUtils.FormatDate(new Date(this.time*1000))+"</span>";html+='<span class="name">'+this.name+"</span>";html+='<span class="size">'+RoxyUtils.FormatFileSize(this.size)+"</span>";html+="</li>";$("#pnlFileList").append(html);var a=$("#pnlFileList li:last");if(RoxyFilemanConf.MOVEFILE){a.draggable({helper:makeDragFile,start:startDragFile,cursorAt:{left:10,top:10},delay:200})}a.click(function(b){selectFile(this)});a.dblclick(function(b){selectFile(this);setFile()});a.tooltip({show:{delay:700},track:true,content:tooltipContent});a.bind("contextmenu",function(b){b.stopPropagation();b.preventDefault();closeMenus("dir");selectFile(this);$(this).tooltip("close");var c=b.pageY-$("#menuFile").height();if(c<0){c=0}$("#menuFile").css({top:c+"px",left:b.pageX+"px"}).show();return false})};this.GetElement=function(){return $('li[data-path="'+this.fullPath+'"]')};this.IsImage=function(){var a=false;if(this.type=="image"){a=true}return a};this.Delete=function(){if(!RoxyFilemanConf.DELETEFILE){alert(t("E_ActionDisabled"));return}var a=RoxyUtils.AddParam(RoxyFilemanConf.DELETEFILE,"f",this.fullPath);var b=this;$.ajax({url:a,type:"POST",data:{f:this.fullPath},dataType:"json",async:false,success:function(d){if(d.res.toLowerCase()=="ok"){$('li[data-path="'+b.fullPath+'"]').remove();var c=Directory.Parse(b.path);if(c){c.files--;c.Update();c.SetStatusBar()}}else{alert(d.msg)}},error:function(c){alert(t("E_LoadingAjax")+" "+a)}})};this.Rename=function(d){if(!RoxyFilemanConf.RENAMEFILE){alert(t("E_ActionDisabled"));return false}if(!d){return false}var b=RoxyUtils.AddParam(RoxyFilemanConf.RENAMEFILE,"f",this.fullPath);b=RoxyUtils.AddParam(b,"n",d);var a=this;var c=false;$.ajax({url:b,type:"POST",data:{f:this.fullPath,n:d},dataType:"json",async:false,success:function(e){if(e.res.toLowerCase()=="ok"){var l=RoxyUtils.MakePath(this.path,d);$('li[data-path="'+a.fullPath+'"] .icon').attr("src",RoxyUtils.GetFileIcon(d));$('li[data-path="'+a.fullPath+'"] .name').text(d);$('li[data-path="'+l+'"]').attr("data-path",l);c=true}if(e.msg){alert(e.msg)}},error:function(e){alert(t("E_LoadingAjax")+" "+b)}});return c};this.Copy=function(a){if(!RoxyFilemanConf.COPYFILE){alert(t("E_ActionDisabled"));return}var c=RoxyUtils.AddParam(RoxyFilemanConf.COPYFILE,"f",this.fullPath);c=RoxyUtils.AddParam(c,"n",a);var b=this;var d=false;$.ajax({url:c,type:"POST",data:{f:this.fullPath,n:a},dataType:"json",async:false,success:function(l){if(l.res.toLowerCase()=="ok"){var e=Directory.Parse(a);if(e){e.files++;e.Update();e.SetStatusBar();e.ListFiles(true)}d=true}if(l.msg){alert(l.msg)}},error:function(e){alert(t("E_LoadingAjax")+" "+c)}});return d};this.Move=function(a){if(!RoxyFilemanConf.MOVEFILE){alert(t("E_ActionDisabled"));return}newFullPath=RoxyUtils.MakePath(a,this.name);var c=RoxyUtils.AddParam(RoxyFilemanConf.MOVEFILE,"f",this.fullPath);c=RoxyUtils.AddParam(c,"n",newFullPath);var b=this;var d=false;$.ajax({url:c,type:"POST",data:{f:this.fullPath,n:newFullPath},dataType:"json",async:false,success:function(l){if(l.res.toLowerCase()=="ok"){$('li[data-path="'+b.fullPath+'"]').remove();var e=Directory.Parse(b.path);if(e){e.files--;e.Update();e.SetStatusBar();e=Directory.Parse(a);e.files++;e.Update()}d=true}if(l.msg){alert(l.msg)}},error:function(e){alert(t("E_LoadingAjax")+" "+c)}});return d}}File.Parse=function(f){var d=false;var e=$("#pnlFileList").find('li[data-path="'+f+'"]');if(e.length>0){d=new File(e.attr("data-path"),e.attr("data-size"),e.attr("data-time"),e.attr("data-w"),e.attr("data-h"))}return d};